<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wood Cut Planner</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
        <!-- Main Top Toolbar -->
        <div class="controls">
            <!-- Projects Dropdown -->
            <div class="dropdown">
                <button class="dropdown-btn">Projects â–¾</button>
                <div class="dropdown-content">
                    <div id="project-list"></div>
                    <div class="divider" style="margin: 5px 0;"></div>
                    <button id="add-project-btn" class="add-btn">+ New Project</button>
                </div>
            </div>

            <div class="divider"></div>

            <!-- View Mode -->
            <div class="mode-switcher">
                <button id="view-2d-btn" class="active">2D</button>
                <button id="view-3d-btn">3D</button>
            </div>

            <!-- Contextual Tools (2D) -->
            <div id="2d-controls" style="display: flex; align-items: center; gap: 15px;">
                <div class="divider"></div>
                <div class="mode-switcher">
                    <button id="draw-mode-btn" class="active">Draw</button>
                    <button id="select-mode-btn">Select</button>
                </div>
            </div>

            <!-- Contextual Tools (3D) -->
            <div id="3d-controls" class="hidden" style="display: flex; align-items: center; gap: 15px;">
                <div class="divider"></div>
                <div class="mode-switcher">
                    <button id="tool-slice-btn">Slice</button>
                    <button id="reset-cam-btn">Reset Camera</button>
                </div>
            </div>

            <div class="divider"></div>
            <span id="total-board-feet" style="margin: 0 10px; font-weight: bold; color: #555;">0.0 BF</span>
        </div>

        <!-- Canvases (Stacked) -->
        <canvas id="drawing-canvas"></canvas>
        <canvas id="overlay-canvas" style="pointer-events: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></canvas>
        <canvas id="canvas-3d" class="hidden" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 5;"></canvas>

        <!-- Properties Panel -->
        <div id="properties-panel" class="properties-panel hidden">
            <h3>Shape Properties</h3>
            <div class="prop-group">
                <label>Name</label>
                <input type="text" id="prop-name" placeholder="e.g. Left Leg">
            </div>
            <div class="prop-group">
                <label>Thickness (drag to adjust)</label>
                <input type="text" id="prop-thickness" class="draggable-input" value="3/4&quot;" readonly>
            </div>
            <div class="prop-group">
                <label>Total Length</label>
                <span id="prop-length">0"</span>
            </div>
            
            <div class="prop-group">
                <label>Active Face (2D View)</label>
                <div style="display: flex; align-items: center; justify-content: space-between; background: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; padding: 5px;">
                    <button id="face-prev-btn" style="padding: 2px 8px; background: none; color: #333; border: none; font-weight: bold; cursor: pointer;">&larr;</button>
                    <span id="face-label" style="font-size: 0.85em; font-weight: bold; color: #555;">Front</span>
                    <button id="face-next-btn" style="padding: 2px 8px; background: none; color: #333; border: none; font-weight: bold; cursor: pointer;">&rarr;</button>
                </div>
            </div>

            <div class="divider" style="margin: 15px 0; height: 1px; width: 100%;"></div>
            
            <div class="prop-group">
                <label>Joinery (Layers)</label>
                <div style="display: flex; gap: 5px;">
                    <button id="add-cutout-btn" style="flex: 1; font-size: 0.85em; padding: 6px; background: #ffebee; color: #c62828; border: 1px solid #ffcdd2;">- Cutout</button>
                    <button id="add-tenon-btn" style="flex: 1; font-size: 0.85em; padding: 6px; background: #e8f5e9; color: #2e7d32; border: 1px solid #c8e6c9;">+ Tenon</button>
                </div>
                <div id="joinery-list" style="margin-top: 10px; font-size: 0.85em; color: #666;"></div>
            </div>

            <div class="prop-group">
                <label>JSON Data (Export/Import)</label>
                <textarea id="prop-json" style="width: 100%; height: 80px; font-size: 0.7em; font-family: monospace; border: 1px solid #ddd; border-radius: 4px; padding: 5px; resize: vertical;"></textarea>
            </div>

            <button id="prop-delete" class="delete-btn">Delete Shape</button>
        </div>

        <!-- Boolean Operations Menu -->
        <div id="boolean-menu" class="context-menu hidden" style="position: absolute; z-index: 100; background: #fff; border: 1px solid #999; box-shadow: 0 4px 15px rgba(0,0,0,0.3); padding: 8px; border-radius: 6px; display: flex; flex-direction: column; gap: 8px; min-width: 120px;">
            <button id="bool-union-btn" style="padding: 8px 12px; cursor: pointer; background: #e8f5e9; color: #1b5e20; border: 1px solid #a5d6a7; border-radius: 4px; font-weight: bold; text-align: left;">Union (Add)</button>
            <button id="bool-subtract-btn" style="padding: 8px 12px; cursor: pointer; background: #ffebee; color: #b71c1c; border: 1px solid #ef9a9a; border-radius: 4px; font-weight: bold; text-align: left;">Subtract</button>
            <button id="bool-cancel-btn" style="padding: 8px 12px; cursor: pointer; background: #f5f5f5; color: #333; border: 1px solid #bdbdbd; border-radius: 4px; font-weight: bold; text-align: left;">Cancel</button>
        </div>
        <!-- Context Menu for Board Presets -->
        <div id="board-preset-menu" class="context-menu hidden" style="position: absolute; z-index: 100; background: #fff; border: 1px solid #999; box-shadow: 0 4px 15px rgba(0,0,0,0.3); padding: 8px; border-radius: 6px; display: flex; flex-direction: column; gap: 4px; min-width: 150px;">
            <div style="font-size: 0.8em; color: #666; padding: 4px 8px; border-bottom: 1px solid #eee; margin-bottom: 4px; font-weight: bold;">Add Board</div>
            <button class="preset-btn" data-w="3.5" data-t="1.5">2x4 Stud (8')</button>
            <button class="preset-btn" data-w="5.5" data-t="1.5">2x6 Stud (8')</button>
            <button class="preset-btn" data-w="3.5" data-t="3.5">4x4 Beam (8')</button>
            <button class="preset-btn" data-w="3.5" data-t="0.75">1x4 Trim (8')</button>
            <button class="preset-btn" data-w="5.5" data-t="0.75">1x6 Trim (8')</button>
            <div class="divider" style="margin: 4px 0;"></div>
            <button id="close-preset-menu" style="background: #f5f5f5; color: #333; font-size: 0.9em; padding: 6px;">Cancel</button>
        </div>
    </div>
    <script type="module" src="src/main.js"></script>
</body>
</html>
